## 10.0.0

_Released 6/1/2022_

We're excited to announce the release of Cypress 10.0! Component testing is now
beta. The experience of end-to-end and component testing in Cypress has been
unified. There's now smoother onboarding and project setup for component testing
and you can quickly switch testing types during development for a seamless test
writing experience. Read more about 10.0 in
[our blog post](https://cypress.io/blog/2022/06/01/cypress-10-release/).

**Breaking Changes:**

**<Icon name="exclamation-triangle" color="red"></Icon> Please run
`cypress open` to go through our interactive migration which will guide you on
updating your files. Also read our
[Migration Guide](/guides/references/migration-guide) which explains the changes
in more detail and provides what changes you need to make in your code to
migrate to Cypress 10.0.**

- **Cypress Configuration File:** We introduced several breaking changes to
  Cypress configuration detailed below.
  - Using a `cypress.json` configuration file is no longer supported. Replace
    this configuration file with a `cypress.config.js`, `cypress.config.ts`,
    `cypress.config.cjs` or `cypress.config.mjs` file. This change provides
    better flexibility and extensibility of configuration. An error will be
    thrown if both a `cypress.json` file and `cypress.config.{cjs,js,mjs,ts}`
    file are found. Addressed in
    [#18221](https://github.com/cypress-io/cypress/pull/18221),
    [#18300](https://github.com/cypress-io/cypress/pull/18300),
    [#20554](https://github.com/cypress-io/cypress/pull/20554), and
    [#20643](https://github.com/cypress-io/cypress/pull/20643).
  - A Cypress configuration file is now required and passing the CLI flag
    `--config-file=false` will throw an error. Addressed in
    [#20643](https://github.com/cypress-io/cypress/pull/20643).
  - A default configuration file will no longer be auto-generated by Cypress
    when a configuration file doesn't exist. Instead, you should run
    `cypress open` and setup your project with a specific testing type to have
    this file generated. This allows you to customize the configuration setup by
    testing-type for the language and dependencies leveraged in your project.
  - The configuration JSON schema is no longer supported since the configuration
    can no longer be provided via a JSON format.
- **Cypress Configuration Options:** Cypress has made several configuration
  option changes including renaming options, removing options, and only allowing
  some options within a specific testing type. Please run `cypress open` to have
  our automated migration update these options for you.

  - Many configuration are now specific to either end-to-end or component
    testing. The types have also been updated accordingly to match. Addressed in
    [#20677](https://github.com/cypress-io/cypress/pull/20677).
  - The `supportFile`, `baseUrl`, and `experimentalSessionAndOrigin`
    configuration options are no longer valid as a top-level configuration
    option and is now a testing-type specific option that must be defined within
    the `e2e` and/or `component` configurations. Addressed in
    [#20589](https://github.com/cypress-io/cypress/pull/20589) and
    [#21588](https://github.com/cypress-io/cypress/pull/21588).
  - Previously the `supportFile` option defaulted to `cypress/support/index.js`,
    now the [`e2e.supportFile`](/guides/references/configuration#e2e) option
    defaults to `cypress/support/e2e.{js,jsx,ts,tsx}` and the
    [`component.supportFile`](/guides/references/configuration#component) option
    defaults to `cypress/support/component.{js,jsx,ts,tsx}`. Addressed in
    [#19776](https://github.com/cypress-io/cypress/pull/19776) and
    [#19364](https://github.com/cypress-io/cypress/pull/19364).
  - The `slowTestThreshold` option is no longer valid as a top-level
    configuration option and is now a testing-type specific option that must be
    defined within the [`e2e`](/guides/references/configuration#e2e) and/or
    [`component`](/guides/references/configuration#component) configurations.
  - The `pluginsFile` option was removed. This option should be replaced with
    the new
    [`setupNodeEvents()`](/guides/references/configuration#setupNodeEvents) and
    [`devServer()`](/guides/references/configuration#devServer) configuration
    options. Addressed in
    [#18798](https://github.com/cypress-io/cypress/pull/18798) and
    [#20560](https://github.com/cypress-io/cypress/pull/20560).
  - The `testFiles` option was removed. This option was replaced with the new
    `specPattern` option. Addressed in
    [#19319](https://github.com/cypress-io/cypress/pull/19319) and
    [#20565](https://github.com/cypress-io/cypress/pull/20565).
  - The `integrationFolder` option was removed. This option was made obsolete
    with by the new `specPattern` option. Addressed in
    [#19319](https://github.com/cypress-io/cypress/pull/19319).
  - The `componentFolder` option was removed. This option was made obsolete with
    by the new `specPattern` option. Addressed in
    [#19319](https://github.com/cypress-io/cypress/pull/19319).
  - The `ignoreTestFiles` option was removed. This option was replaced with the
    new `excludeSpecPattern` option. Addressed in
    [#19319](https://github.com/cypress-io/cypress/pull/19319).
  - The `experimentalStudio` option was removed with the removal of the
    experimental Cypress Studio feature. If this option is configured in your
    project, a warning message will be displayed. Please leave any feedback
    around Cypress Studio
    [here](https://github.com/cypress-io/cypress/discussions/21561). Addressed
    in [#20515](https://github.com/cypress-io/cypress/pull/20515).

- During `cypress open`, the ability to "Run all specs" and "Run filtered specs"
  has been removed. Please leave feedback around the removal of this feature
  [here](https://github.com/cypress-io/cypress/discussions/21628). Your feedback
  will help us make product decisions around the future of this feature.

- The experimental Cypress Studio feature has been removed. Please leave
  feedback around the removal of this feature
  [here](https://github.com/cypress-io/cypress/discussions/21561). Your feedback
  will help us make product decisions around the future of this feature.
  Addressed in [#20515](https://github.com/cypress-io/cypress/pull/20515).

- Generated screenshots and videos will still be created inside their respective
  folders (`screenshotsFolder`, `videosFolder`). However, the paths of generated
  files inside those folders will be stripped of any common ancestor paths
  shared between spec files found by the `specPattern` option and may no longer
  be deterministic. Addressed in
  [#19319](https://github.com/cypress-io/cypress/pull/19319).

**Deprecations:**

- The `cypress open-ct` and `cypress run-ct` commands have been deprecated. Use
  `cypress open --component` and `cypress run --component` instead. Addresses
  [#18418](https://github.com/cypress-io/cypress/issues/18418).

**Features:**

- Component testing is now Beta. See the [framework and bundler matrix]() to
  view the list of Cypress supported component testing options. Addressed in
  [#21111](https://github.com/cypress-io/cypress/pull/21111).

- **Cypress Configuration**

  - Support for `cypress.config.js|ts|cjs|mjs` configuration files was added.
    Addressed in [#20643](https://github.com/cypress-io/cypress/pull/20643).
  - The Cypress App will now refresh when changes are made in the configuration
    file instead of closing the app. Addressed in
    [#21160](https://github.com/cypress-io/cypress/pull/21160).

  - New Configuration Options

    - The
      [`setupNodeEvents()`](/guides/references/configuration#setupNodeEvents)
      option is a new testing type specific configuration option. It must be
      defined within the [`e2e`](/guides/references/configuration#e2e) and/or
      [`component`](/guides/references/configuration#component) configurations.
      This option allows you to modify your loaded configuration, listen to
      events and register plugins. This option replaces the `pluginsFile`
      option. Addressed in
      [#18798](https://github.com/cypress-io/cypress/pull/18798) and
      [#20560](https://github.com/cypress-io/cypress/pull/20560).

    - The [`devServer`](/guides/references/configuration#devServer) option is a
      new component testing specific option that must be defined within the
      [`component`](/guides/references/configuration#component) configuration.
      This option provides a mechanism for starting a component testing
      dev-server when tests are running.

    - The `specPattern` option is a new testing-type specific configuration
      option that must be defined within the
      [`e2e`](/guides/references/configuration#e2e) and/or
      [`component`](/guides/references/configuration#component) configurations.
      This option accepts a glob or an array of globs of the spec files to load.
      This option simplifies the spec discovery by replacing the
      `componentFolder`, `integrationFolder` and `testFiles` options. Addressed
      in [#19319](https://github.com/cypress-io/cypress/pull/19319),
      [#20565](https://github.com/cypress-io/cypress/pull/20565) and
      [#20853](https://github.com/cypress-io/cypress/pull/20853).

      - The [`e2e.specPattern`](/guides/references/configuration#e2e) default
        value for new projects is `cypress/e2e/**.cy.{js,jsx,ts,tsx}`.
        Previously the e2e spec files were discovered using the
        `integrationFolder` and `testFile` options, which defaulted to the glob
        pattern `cypress/integration/*/*.*`. For existing projects, please run
        `cypress open` to have your spec files automatically migrated. Note,
        this change drops support for default matching of specs with either
        `.coffee` or `.cjsx` extensions.Addressed in
        [#21193](https://github.com/cypress-io/cypress/pull/21193).
      - The
        [`component.specPattern`](/guides/references/configuration#component)
        default value is `**/*.cy.{js,jsx,ts,tsx}`. Previously the component
        spec files were discovered using the `componentFolder` and `testFile`
        options, which had defaulted to the glob pattern
        `cypress/component/*/*.*`.

    - The `excludeSpecPattern` option is a new testing type specific
      configuration option that must be defined within the
      [`e2e`](/guides/references/configuration#e2e) and/or
      [`component`](/guides/references/configuration#component) configurations.
      This option accepts a glob or an array of globs which allows you to ignore
      spec files that would otherwise be shown in your list of specs. This
      option replaces the `ignoreTestFiles` option. Addressed in
      [#19319](https://github.com/cypress-io/cypress/pull/19319),
      [#19980](https://github.com/cypress-io/cypress/pull/19980),
      [#20763](https://github.com/cypress-io/cypress/pull/20763),
      [#20853](https://github.com/cypress-io/cypress/pull/20853).
      - The [`e2e.excludeSpecPattern`](/guides/references/configuration#e2e)
        default value is the the same as the replaced `ignoreTestFiles` glob
        pattern of `*.hot-update.js`.
      - The
        [`component.excludeSpecPattern`](/guides/references/configuration#component)
        default value is `['**/__snapshots__/*','**/__image_snapshots__/*']`
        plus the `e2e.specPattern` glob patterns. Previously this defaulted to
        the glob pattern `*.hot-update.js`.
      - The `**/node_modules/**` pattern is automatically added to both
        `e2e.excludeSpecPattern` and `component.excludeSpecPattern`, and does
        not need to be specified and can't be overridden. This is consistent
        with <10.0 behavior.

  - Intelligent Code Completion was added with the `defineConfig()` helper
    function. This enables configuration auto-completion and in-line
    documentation in the configuration file while minimizing boilerplate
    configuration values. While it's not strictly necessary for Cypress to parse
    your configuration, we recommend wrapping your config object with
    `defineConfig()`. Addressed in
    [#18302](https://github.com/cypress-io/cypress/pull/18302).

- Cypress Commands

  - Enhancements were made to provide visual indication of nested commands and
    logs. With this change, users are now able to to click on log groups to
    print additional log details to the dev tools console.
  - The `.within()` command was updated to provide visual indication of logs and
    command executed in the `.within` command context. Addresses
    [#20433](https://github.com/cypress-io/cypress/issues/20433).
  - The redundant `cy.session()` log is now removed. Address
    [#7673](https://github.com/cypress-io/cypress/issues/7673) in
    [#21457](https://github.com/cypress-io/cypress/pull/21457).

  - Users can now add custom `cy.hover()` and `cy.mount()` implementation using
    `Cypress.Commands.add()` since we don't provide a default implementation.
    Previously users had to use `Cypress.Command.override()` to provide the
    custom implementation. Addresses
    [#18941](https://github.com/cypress-io/cypress/issues/18941).

- Cypress Module

  - With the beta release of Component Testing, the following component testing
    plugins are now shipped with the cypress module to enable easy `cy.mount()`
    implementation. Your local framework dependencies found in `node_modules`
    will be references to prevent adding additional dependencies or
    peer-dependencies to the Cypress package.json. From now on, the latest
    plugin version will be shipped with each Cypress release. Please consult the
    [supported component-testing framework dependency matrix]() **ADD LINK** to
    check the plugin's minimum dependency version to ensure your framework
    dependencies are compatible with these out-of-the-box plugins shipped with
    the cypress module. If you are using a non-compatible version, you can add a
    custom [devServer](/guides/references/configuration#devServer) configuration
    and add the corresponding `cy.mount()` command to test in Cypress. Addressed
    in [#20930](https://github.com/cypress-io/cypress/pull/20930).

    - ships with `@cypress/mount-utils@2.0.0`
    - ships with `@cypress/react@6.0.0`
    - ships with `@cypress/vue@4.0.0`
    - ships with `@cypress/vue2@1.0.0`

  CLI

  - You can now pass in testing type specific configuration options via the
    `--config` CLI flag without nesting JSON. Addressed in
    [#20127](https://github.com/cypress-io/cypress/pull/20127).

  - New `--e2e` and `--component` CLI flags were added to `cypress run` and
    `cypress open` to allow a user to run or launch Cypress for a specific
    testing-type.
    - If a testing-type specific CLI flag is not provided when running
      `cypress run`, Cypress will run end-to-end tests by default.
  - A warning message is now displayed when `cypress open` is ran with the
    `--browser` CLI flag for a browser that does not exist on the system.
    Addressed in [#18473](https://github.com/cypress-io/cypress/pull/18473).

- Launchpad:
  <!-- - Enhancements were made to allow the user to switch between the end-to-end testing and the Alpha component testing runners from within the Cypress app. -->

  - Updates have been made to the Cypress App during `cypress open`.

    - When you launch Cypress via `cypress open` you'll be asked whether you
      want to do end-to-end or component testing and taken through the
      configuration necessary to setup your project. Addressed in
      [#18924](https://github.com/cypress-io/cypress/pull/18924).
    - Having files scaffolded on new projects during end-to-end testing is now
      opt in and not automatic. Addressed in
      [#18924](https://github.com/cypress-io/cypress/pull/18924).

  - Project Migration
    - When Cypress detects you have a `cypress.json` during `cypress run`, it
      will error and ask you to run `cypress open` to migrate. When Cypress
      detects you have a `cypress.json` during `cypress open`, it will guide you
      through project migration to ensure your project continues to work as
      expected. Addressed in
      [#18924](https://github.com/cypress-io/cypress/pull/18924).

- In-Browser Test Runner:

  - You can now change specs or the browser within the same window as running
    your tests.
  - You can now see many git details within your current project in Cypress
    including the current branch and the last commit details of each spec in the
    spec explorer. Addressed in
    [#20648](https://github.com/cypress-io/cypress/pull/20648),
    [#21139](https://github.com/cypress-io/cypress/pull/21139),
    [#21436](https://github.com/cypress-io/cypress/pull/21436) and
    [#20744](https://github.com/cypress-io/cypress/pull/20744)
  - When creating a new spec within Cypress, your project's language is detected
    to provide the correct file extension and the `specPattern` is checked to
    ensure the spec is found by Cypress. After creating the spec, you can
    preview the spec that was generated with the option to immediately run the
    spec or create another spec. Addressed in
    [#21225](https://github.com/cypress-io/cypress/pull/21225),
    [#20567](https://github.com/cypress-io/cypress/pull/20567),
    [#20657](https://github.com/cypress-io/cypress/pull/20657),
    [#20962](https://github.com/cypress-io/cypress/pull/20962).

**Bugfixes:**

- An error message is displayed when you add a command using
  `Cypress.Commands.add()` that has the same name as an internal reserved
  Cypress command. Addresses
  [#6146](https://github.com/cypress-io/cypress/issues/6146).
- A one pixel left, vertical border was removed that was incorrectly included on
  screenshot artifacts generated from the `cy.screenshot()` command. Addressed
  in [#21019](https://github.com/cypress-io/cypress/pull/21019).
- Changes were made to `cypress run` to the end-to-end test runner to launch the
  browser once per run for Chrome, Chromium and Firefox browsers by opening and
  closing the browser tabs between spec execution. This fixed a memory leak,
  reduces the overall time it takes to run a set of specs and aligns with how
  the browser is launched once for all specs in component testing. With this
  change, the `before:browser:launch` node event will now only fire once per
  run, instead of firing before each spec. Addressed in
  [#19915](https://github.com/cypress-io/cypress/pull/19915).

- The default webpack configuration's host value was changed from `localhost` to
  `127.0.0.1` to support the Node 17+ changes with how DNS names are resolved.
  Addressed in [#21430](https://github.com/cypress-io/cypress/pull/21430).

**Dependencies:**

- Added `@cypress/mount-utils@2.0.0` dependency.
- Added `@cypress/react@6.0.0` dependency.
- Added `@cypress/vue@4.0.0` dependency.
- Added `@cypress/vue2@1.0.0` dependency.

**Misc:**

With the new unified experience, there are a few changes and additions in
terminology.

- Cypress App: Cypress 10 includes first-class support for component testing.
  This means that in addition to the end-to-end test runner that developers know
  and love, we have a new test runner for testing components. Users can switch
  between test runners using the launchpad when running `cypress open`. Because
  of this, we are dropping "Test Runner" as the official name of our OSS app and
  will now call our product either Cypress or the Cypress app.
- Launchpad: When using `cypress open`, the Launchpad displays the project list
  (in global mode) or testing-types (in project mode) that the user can select
  to run tests for.
- Cypress Dashboard: The Cypress Dashboard Service is the web-based companion to
  the Cypress app. Within the App, this served was being referenced as the
  Cypress Cloud and changes have been made to align the terminology to the
  Dashboard service. [#20369](https://github.com/cypress-io/cypress/pull/20369)
- Plugins: The Plugins concept in Cypress still exists with the intent to tap
  into, modify or extend the internal behavior(s) of Cypress. It however is
  expected to be used in conjunction with our new `setupNodesEvents`
  configuration option, which was named to reflect that Plugins leverage
  Cypress's node events.

<!-- h2. Raw Notes

## Starting Again 5/11/2022

## User Facing - New Information

[#21432](https://github.com/cypress-io/cypress/pull/21432)

- automatically detect and add bundler config to cypress.config.js when
  configuring component testing.
- attempt to detect {webpack|vite}.config.js in common locations if required
  (eg, when using a library w/o an adapter like CRA, Next.js, etc)
- if we find the config, automatically add it to the generated cypress.config.js
- if not, add a comment asking the user to add it

[#21411](https://github.com/cypress-io/cypress/pull/21411) equal to 9.x
behavior? scaffold the a component spec in cypress/component/\*.js by default

[#21422](https://github.com/cypress-io/cypress/pull/21422) equal to 9.x
behavior? Provide instruction on how to record your first run to the Cypress
Dashboard

[#21370](https://github.com/cypress-io/cypress/pull/21370)equal to 9.x
behavior? The runs tab will refresh with the latest runs & updates to any
"running" rows in an interval, currently every 15 seconds.

[#21293](https://github.com/cypress-io/cypress/pull/21293) equal to 9.x
behavior? Hide the matches count on the spec creation modal

# Migration

Component Testing Setup -

- [#21111](https://github.com/cypress-io/cypress/pull/21111) - add alpha labels
  to next.js framework and
  [#21229](https://github.com/cypress-io/cypress/pull/21229) Added alpha support
  for `next` and `nuxt` frameworks.
- [](https://github.com/cypress-io/cypress/pull/21235) success banner if all
  required dependencies have been installed

LaunchPad - Dashboard Login

- [#21234](https://github.com/cypress-io/cypress/pull/21234) - Fixes a bug where
  Cypress would crash if a user tried to log in before selecting a project in
  interactive mode.

Launchpad - Switch testing-types
[#21371](https://github.com/cypress-io/cypress/pull/21371) - only launch browser
when testing-type is configured

Cypress App - Generate Spec

- [#21225](https://github.com/cypress-io/cypress/pull/21225) - Provide spec
  preview when generation is successful
- [#20567](https://github.com/cypress-io/cypress/pull/20567) - spec file
  extension
- [#20657](https://github.com/cypress-io/cypress/pull/20657) and
  [#20962](https://github.com/cypress-io/cypress/pull/20962) update watchers to
  handle when specs are added or removed and display in reporter
- [#20434](https://github.com/cypress-io/cypress/pull/20434) doc alert banner
  after creating component spec

Cypress App - Test runs

- [#21087](https://github.com/cypress-io/cypress/pull/21087) Users can now
  execute a test in open mode, go back to the specs page, add a new test, and
  run that newly added test without error
- [#20546](https://github.com/cypress-io/cypress/pull/20546) login
  cancellation - NO DOC needed

Cypress App - In App Resolved Config

- [#21190](https://github.com/cypress-io/cypress/pull/21190) - Sort config in
  ABC order
- [#21057](https://github.com/cypress-io/cypress/pull/21057) config presidence
  is followed

Cypress App - In-test Viewport information:
[#21352](https://github.com/cypress-io/cypress/pull/21352) - info message

Cypress App - Error handling

- [#21157](https://github.com/cypress-io/cypress/pull/21157) Ensure errors are
  displayed in both the app and launch pad so errors are visible regardless of
  the window users are viewing.
  - baseError state will be surfaced in the app now, as well as the launchpad
  - a loading spinner will appear when the config has been saved and is
    reloading, or the config has been reloaded manually with the "try again"
    button from the error state.
- [#21003](https://github.com/cypress-io/cypress/pull/21003) display correct
  error location

Test Runner - Test selected

- [#21103](https://github.com/cypress-io/cypress/pull/21103) - UI- spec panel
  closed by default
- [#20499](https://github.com/cypress-io/cypress/pull/20499) redirect to home
  page if spec is removed/not found

Reporter / AUT Sizing

- [#21254](https://github.com/cypress-io/cypress/pull/21254)

- [#21169](https://github.com/cypress-io/cypress/pull/21169) throw error when
  invalid plugin is used

Snapshots

- [#21122 ](https://github.com/cypress-io/cypress/pull/21122) highlight text
  clibable to toggle dom snapshot <-- 9.x?

here's a type up, going to create a Jira issue to ensure we track this work We
will continue to release the same packages we released before. Our documentation
shows using custom functions that import `@cypress/webpack-dev-server` so we
will need to continue to publish them (same for `@cypress/vite-dev-server`) We
are releasing a new package called `@cypress/vue2`. This was previously released
under the `@cypress/vue@2` tag, but we split this package out. Packages +
versions:

- @cypress/mount-utils: 2.0.0
- @cypress/react: 6.0.0
- @cypress/vue: 4.0.0
- @cypress/vue2: 1.0.0 (New Package)
- @cypress/webpack-dev-server: 2.0.0
- @cypress/vite-dev-server: 3.0.0 Since we added a breaking change to
  `@cypress/mount-utils`, this necessitates a breaking change for all mount
  libraries. These packages are only released on `master`. If there is
  automation for merging `develop` into `master` then we should put in
  safeguards to prevent prematurely publishing these packages. We should
  coordinate the official release of 10.0 with a corresponding semver release of
  these packages. To facilitate the breaking changes, we will need to push a
  commit to these packages with `BREAKING CHANGE` in the footer of the commit
  message for our semver to properly publish the new versions. Since we have new
  packages we are publishing and we did a drastic overhaul of the dev-servers,
  we should ensure that these packages are properly configured so as to
  facilitate their publish when we merge develop into master, or if we push a
  commit that enables their publishing if they are disabled. Maybe we just
  manually publish these... Since we are bundling these packages in the binary,
  any breaking changes will result in a breaking change for Cypress. We should
  ensure that our current system for handling breaking changes works when we
  make breaking changes to the packages located in `npm`. Probably doesn't need
  to be figured out now but just wanted to note this.

Notes from Marketing doc

- Better onboarding and project setup, descriptions of each file scaffolded
- Timings on each test zz
- ESModule support out of the box
- Keyboard shortcuts (?? what changed here)

- sesison comnad doublelog removed "Live" config changes automatically reload
  the test runner (wasn't this 9.x behavior?)
- Files imported from config are automatically watched (wasn'r this 9.x
  behavior? broken for ct?)

- You can pass `cypress open --browser --e2e/ct` to open directly the tests in
  the browser.

Current Jiras: -->
